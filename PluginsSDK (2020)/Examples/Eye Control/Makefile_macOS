# Makefile_macOS	|	Sep 08 2011
#
#	This is the OS X makefile for the EyeControl plugin.
#
# Document Author: William Yu
# Document Contributor(s):
#
# Revision History

BASEDIR = ../..
SDKGLUECODEDIR = $(BASEDIR)/GlueCode
SDKINCLUDEDIR = $(BASEDIR)/Includes

#MINVERSIONFLAG = -mmacosx-version-min=10.10
CXX = clang++
CXXFLAGS = -arch x86_64 $(MINVERSIONFLAG) -I$(SDKINCLUDEDIR)

BUILDOBJDIR = BuildmacOS

OBJS =	$(BUILDOBJDIR)/EyeControlPlugin.o \
		$(BUILDOBJDIR)/PluginMain.o

all: CreateBuildObjDir $(OBJS)
	$(CXX) $(CXXFLAGS) -shared -o EyeControl.dylib $(OBJS)

CreateBuildObjDir:
	mkdir -p $(BUILDOBJDIR)

$(BUILDOBJDIR)/EyeControlPlugin.o: EyeControlPlugin.cpp
	$(CXX) $(CXXFLAGS) EyeControlPlugin.cpp -c -o $@

$(BUILDOBJDIR)/PluginMain.o: $(SDKGLUECODEDIR)/PluginMain.cpp
	$(CXX) $(CXXFLAGS) $(SDKGLUECODEDIR)/PluginMain.cpp -c -o $@

clean:
	rm -f $(BUILDOBJDIR)/*.o
	rm EyeControl.dylib
